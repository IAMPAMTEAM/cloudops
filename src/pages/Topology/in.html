<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Network Diagram</title>
    <style>
      .container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        margin: 20px;
      }
      .network-group,
      .gateway-group,
      .vpc-group {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }
      .vpc-group {
        border: 2px solid purple;
      }
      .group-image {
        width: 100px;
        height: 100px;
      }
      .group-text {
        margin-top: 5px;
        text-align: center;
      }
      .line {
        stroke: grey;
        stroke-dasharray: 4;
      }
    </style>
  </head>
  <body>
    <div id="container-network" class="container"></div>
    <div id="container-gateway" class="container"></div>
    <div id="container-vpc" class="container"></div>

    <svg id="connections" width="100%" height="500px" style="position: absolute; top: 0; left: 0; pointer-events: none"></svg>

    <script>
      const data = {
        networkList: {
          INTERNET: 'https://icons.terrastruct.com/essentials%2F140-internet.svg',
          'ON-PREMISES': 'https://icons.terrastruct.com/azure%2FDatabases%20Service%20Color%2FVirtual%20Datacenter.svg',
          VPCs: 'https://icons.terrastruct.com/aws%2FNetworking%20&%20Content%20Delivery%2FAmazon-VPC.svg',
          'AWS SERVICE': 'https://icons.terrastruct.com/aws%2F_Group%20Icons%2FAWS-Cloud_light-bg.svg',
        },
        vpcList: [
          {
            vpcName: 'vpc-seoul(10.1.0.0/16)',
            gateways: ['Internet Gateway', 'NAT Gateway', 'VPC Peering', 'VPC Endpoint'],
          },
          {
            vpcName: 'vpc-zerotrust-seoul(10.2.0.0/16)',
            gateways: ['Internet Gateway', 'NAT Gateway', 'VPC Peering', 'Direct Connect', 'VPC Endpoint'],
          },
          {
            vpcName: 'vpc-provider(10.10.0.0/16)',
            gateways: ['Internet Gateway', 'NAT Gateway', 'Virtual Private Gateway', 'VPC Peering', 'Direct Connect', 'Private Link'],
          },
          {
            vpcName: 'vpc-tenants(10.100.0.0/16)',
            gateways: ['Internet Gateway', 'VPC Peering', 'VPC Endpoint', 'Private Link'],
          },
        ],
        gatewayList: {
          'Internet Gateway': {
            id: 'igw-d8b65096a4',
            iconUrl: 'https://icons.terrastruct.com/aws%2FCompute%2F_Instance%2FAmazon-EC2_Instance_light-bg.svg',
            connectedNetwork: 'INTERNET',
          },
          'Virtual Private Gateway': {
            id: 'vgw-1e1e3a8df5',
            iconUrl: 'https://icons.terrastruct.com/aws%2FNetworking%20&%20Content%20Delivery%2FAmazon-VPC_Internet-Gateway_light-bg.svg',
            connectedNetwork: 'ON-PREMISES',
          },
          'NAT Gateway': {
            id: 'nat-87ed5a4e94',
            iconUrl: 'https://icons.terrastruct.com/aws%2FNetworking%20&%20Content%20Delivery%2FAmazon-VPC_NAT-Gateway_light-bg.svg',
            connectedNetwork: 'INTERNET',
          },
          'Transit Gateway': {
            id: 'tgw-7a135c8076',
            iconUrl: 'https://icons.terrastruct.com/aws%2FNetworking%20&%20Content%20Delivery%2FAWS-Transit-Gateway.svg',
            connectedNetwork: 'AWS VPCs',
          },
          'VPN Peering': {
            id: 'pcx-59ae02542b',
            iconUrl: 'https://icons.terrastruct.com/aws%2FNetworking%20&%20Content%20Delivery%2FAmazon-VPC_Peering_light-bg.svg',
            connectedNetwork: 'AWS VPCs',
          },
          'Direct Connect': {
            id: 'dxcon-04668253ac',
            iconUrl: 'https://icons.terrastruct.com/aws%2FNetworking%20&%20Content%20Delivery%2FAWS-Direct-Connect.svg',
            connectedNetwork: 'ON-PREMISES',
          },
          'Private Link': {
            id: 'vpce-179762c07a',
            iconUrl: 'https://icons.terrastruct.com/aws%2FNetworking%20&%20Content%20Delivery%2FAWS-PrivateLink.svg',
            connectedNetwork: 'AWS SERVICE',
          },
          'VPC Endpoint': {
            id: 'vpce-b383190236',
            iconUrl: 'https://icons.terrastruct.com/aws%2FNetworking%20&%20Content%20Delivery%2FAmazon-VPC_Endpoints_light-bg.svg',
            connectedNetwork: 'AWS SERVICE',
          },
        },
      };

      function createNetworkGroups(containerId, networkList) {
        const container = document.getElementById(containerId);
        for (const [name, url] of Object.entries(networkList)) {
          const group = document.createElement('div');
          group.className = 'network-group';

          const img = document.createElement('img');
          img.src = url;
          img.className = 'group-image';

          const text = document.createElement('div');
          text.className = 'group-text';
          text.textContent = name;

          group.appendChild(img);
          group.appendChild(text);
          container.appendChild(group);
        }
      }

      function createGatewayGroups(containerId, gatewayList) {
        const container = document.getElementById(containerId);
        for (const [name, gateway] of Object.entries(gatewayList)) {
          const group = document.createElement('div');
          group.className = 'gateway-group';

          const img = document.createElement('img');
          img.src = gateway.iconUrl;
          img.className = 'group-image';

          const text = document.createElement('div');
          text.className = 'group-text';
          text.textContent = gateway.id;

          group.appendChild(img);
          group.appendChild(text);
          container.appendChild(group);
        }
      }

      function createVpcGroups(containerId, vpcList) {
        const container = document.getElementById(containerId);
        vpcList.forEach((vpc) => {
          const group = document.createElement('div');
          group.className = 'vpc-group';

          const box = document.createElement('div');
          box.className = 'group-image';
          box.style.width = '100px';
          box.style.height = '100px';
          box.style.border = '2px solid purple';
          box.style.display = 'flex';
          box.style.alignItems = 'center';
          box.style.justifyContent = 'center';
          box.textContent = 'VPC';

          const text = document.createElement('div');
          text.className = 'group-text';
          text.textContent = vpc.vpcName;

          group.appendChild(box);
          group.appendChild(text);
          container.appendChild(group);
        });
      }

      function drawConnections(gatewayList, networkList) {
        const svg = document.getElementById('connections');
        const gatewayGroups = document.querySelectorAll('.gateway-group');
        const networkGroups = document.querySelectorAll('.network-group');

        gatewayGroups.forEach((gatewayGroup) => {
          const gatewayId = gatewayGroup.querySelector('.group-text').textContent;
          const gateway = Object.values(gatewayList).find((g) => g.id === gatewayId);
          if (gateway) {
            const networkGroup = [...networkGroups].find((ng) => ng.querySelector('.group-text').textContent === gateway.connectedNetwork);
            if (networkGroup) {
              const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
              const gatewayRect = gatewayGroup.getBoundingClientRect();
              const networkRect = networkGroup.getBoundingClientRect();

              line.setAttribute('x1', gatewayRect.left + gatewayRect.width / 2);
              line.setAttribute('y1', gatewayRect.bottom);
              line.setAttribute('x2', networkRect.left + networkRect.width / 2);
              line.setAttribute('y2', networkRect.top);
              line.className = 'line';

              svg.appendChild(line);
            }
          }
        });
      }

      createNetworkGroups('container-network', data.networkList);
      createGatewayGroups('container-gateway', data.gatewayList);
      createVpcGroups('container-vpc', data.vpcList);
      drawConnections(data.gatewayList, data.networkList);
    </script>
  </body>
</html>
